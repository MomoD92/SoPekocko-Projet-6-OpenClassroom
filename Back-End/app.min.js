'use strict';const express=require("express"),bodyParser=require("body-parser"),mongoose=require("mongoose"),Sauce=require("./models/sauce"),saucesRoutes=require("./routes/sauces"),userRoutes=require("./routes/user"),app=express(),path=require("path");
mongoose.connect("mongodb+srv://MauriceDiouf:mariane2007@cluster0.aqfga.mongodb.net/Deployments?retryWrites=true&w=majority",{useNewUrlParser:!0,useUnifiedTopology:!0,useCreateIndex:!0,useFindAndModify:!1}).then(()=>console.log("Connexion \u00e0 MongoDB r\u00e9ussie !")).catch(()=>console.log("Connexion \u00e0 MongoDB \u00e9chou\u00e9e !"));
app.use((c,a,b)=>{a.setHeader("Access-Control-Allow-Origin","*");a.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content, Accept, Content-Type, Authorization");a.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, PATH, OPTIONS");a.setHeader("Access-Control-Allow-Credentials",!0);b()});app.use(bodyParser.json());app.use("/images",express.static(path.join(__dirname,"images")));app.use("/api/sauces",saucesRoutes);app.use("/api/auth",userRoutes);module.exports=app;